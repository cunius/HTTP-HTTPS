# SOCKET

- 서버와 클라이언트가 특정 포트를 통해 실시간으로 양방향 통신
- 프로세스가 데이터를 송수신 할 때 반드시 소켓을 열어서 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어들임
- 전송 계층과 응용 프로그램 사이의 인터페이스 역할, 떨어져 있는 두 호스트 연결
- OSI 7 계층 중 응용 계층에 속하는 프로세스들은 데이터 송수신을 위해 반드시 소켓을 거쳐 전송 계층으로 데이터를 전달해야 함

---

### 1. 소켓의 3 요소

- Protocol
    - 시스템들 사이 통신을 원활하게 해주는 통신 규약
- IP address
    - 전 세계 컴퓨터에 부여된 고유 식별 주소
- Port
    - 한 호스트 내에서 네트워크 통신을 하고있는 프로세스를 식별하기 위해 사용되는 고유의 넘버
    - 같은 호스트 내에서 서로 다른 프로세스가 같은 포트 넘버를 가질 수 없음

### 2. 소켓 종류

- TCP (Stream)
    - TCP 를 사용하는 양방향 연결 지향형 소켓
    - 송수신자 연결 보장 → 신뢰성 있는 데이터 송수신 가능
    - 오류 수정, 전송 처리, 흐름 제어 보장
    - 데이터 순서 보장 → 송신된 순서에 따라 중복되지 않게 데이터 수신
    - 소량 데이터보다 대량 데이터 전송에 적합
- UDP (Datagram)
    - UDP 를 사용하는 비연결형 소켓
    - 데이터의 순서와 신뢰성 보장 어려움 → 데이터가 손실되도 오류가 발생하지 않음
    - 데이터 크기에 제한 있음
    - 전화 등 실시간 멀티미디어 정보를 처리하기 위해 사용

### 3. 소켓 통신 흐름

![Screenshot 2023-10-17 at 19.34.48.png](SOCKET%209bacecd58a0f49678467940b3c004f0b/Screenshot_2023-10-17_at_19.34.48.png)

- 서버 소켓
    - 클라이언트 소켓의 연결 요청 대기, 연결 요청이 오면 클라이언트 소켓을 생성해 통신이 가능하게 함
        - socket() 함수 - 소켓 생성
        - bind() 함수 - Ip, Port 넘버 설정
        - listen() 함수 - 클라이언트의 접근 요청에 수신 대기열을 만들어 몇 개의 클라이언트를 대기 시킬지 결정
        - accept() 함수 - 클라이언트와의 연결을 기다림
- 클라이언트 소켓
    - 실제로 데이터 송수신이 일어남
        - socket() 함수 - 소켓을 엶
        - connect() 함수 - 통신 할 서버의 설정된 IP와 Port 넘버에 통신 시도
        - accept() 함수 - 통신 시도 시 서버가 클라이언트의 socket descriptor 반환
        - 클라이언트와 서버가 서로 read(), write() 반복하며 통신

### 4. HTTP 통신 vs SOCKET 통신

| HTTP 통신 | SOCKET 통신 |
| --- | --- |
| 클라이언트의 요청이 있을 때만 서버가 응답하는 단방향 통신
서버로부터 응답을 받으면 바로 연결이 종료됨
→ Keep Alive 옵션으로 일정 시간 연결 유지 가능 | 클라이언트와 서버가 특정 포트를 통해 연결을 유지하는 양방향 통신 |
| 필요한 경우에만 서버로 요청을 보냄 | 서버와 클라이언트가 실시간으로 데이터를 주고받음 |
| 요청을 보내 서버의 응답을 기다리는 애플리케이션의 개발 등에 사용됨 | 실시간 동영상 스트리밍, 온라인 게임 등에 사용됨 |

---

- ref
    
    [[기본] 소켓(SOCKET)통신 이란?](https://helloworld-88.tistory.com/215)
    
    [소켓이란? 종류, 통신 흐름, HTTP통신과의 차이](https://velog.io/@newdana01/소켓이란-종류-통신-흐름-HTTP통신과의-차이)
